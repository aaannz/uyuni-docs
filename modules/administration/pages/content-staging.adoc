[[content-staging]]
= Content Staging


Staging is used by clients to download packages in advance, before they are installed.
This allows package installation to begin as soon as it is scheduled, which can reduce the amount of time required for a maintenance window.

Check the [guimenu]``Enable Staging Contents`` box to allow clients in this organization to stage package data.

You can also enable staging at the command prompt by editing [path]``/etc/sysconfig/rhn/up2date``, and adding or editing these lines:

----
stagingContent=1
stagingContentWindow=24
----

////
2018-12-10, ke: /etc/sysconfig/rhn/up2date still exists. @renner confirmed some tools use it
                (at least, trad. client).  To be renamed in the future.
////

The ``stagingContentWindow`` parameter is a time value expressed in hours and determines when downloading will start.
It is the number of hours before the scheduled installation or update time.
In this example, content will be downloaded 24 hours before the installation time.
The start time for download depends on the selected contact method for a system.
The assigned contact method sets the time for when the next [command]``mgr_check`` will be executed.

Next time an action is scheduled, packages are automatically downloaded, but not installed.
At the scheduled time, the staged packages are installed.

Every Organization administrator can enable Content Staging from the Organization configuration page menu:Admin[Organization > OrgName > Configuration > Enable Staging Contents].

Staging content for clients is affected by two parameters.

* [path]``salt_content_staging_advance:`` expresses the advance time, in hours, for the content staging window to open with regard to the scheduled installation/upgrade time.
* [path]``salt_content_staging_window:`` expresses the duration, in hours, of the time window for Salt clients to stage packages in advance of scheduled installations or upgrades.

A value of *salt_content_staging_advance* equal to *salt_content_staging_window* results in the content staging window closing exactly when the installation/upgrade is scheduled to be executed.
A larger value allows separating download time from the installation time.

These options are configured in [path]``/usr/share/rhn/config-defaults/rhn_java.conf``
 and by default assume the following values:

* [path]``salt_content_staging_advance: 8 hours``
* [path]``salt_content_staging_window: 8 hours``

[NOTE]
====
These parameters will only have an effect when Content Staging is enabled for the targeted Organization.
====
